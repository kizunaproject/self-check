<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>倭之魂：自らを守る十章</title>
    <style>
        body {
            background-color: #0d0d0d;
            background-image: linear-gradient(rgba(0,0,0,0.0), rgba(0,0,0,0.0)), url('bg.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: #ffffff;
            font-family: sans-serif;
            margin: 0;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }
        #container {
            width: 95%;
            max-width: 600px;
            margin: 20px 0;
            padding: 25px;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            border: 2px solid #d4af37;
        }
        .screen { display: none; }
        .active { display: block; animation: fadeIn 0.4s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        h1 { color: #d4af37; font-size: 1.5rem; margin-bottom: 20px; text-align: center; }
        h2 { color: #d4af37; font-size: 1.2rem; border-bottom: 1px solid #d4af37; padding-bottom: 5px; }
        .concept-box { background: rgba(212, 175, 55, 0.15); padding: 15px; border-radius: 10px; margin-bottom: 20px; }
        .question-text { font-size: 1.4rem; font-weight: bold; margin: 30px 0; line-height: 1.5; text-align: center; }

        .btn-group { display: flex; flex-direction: column; gap: 15px; }
        button {
            padding: 20px;
            background: rgba(212, 175, 55, 0.1);
            border: 2px solid #d4af37;
            color: #d4af37;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.2rem;
        }
        button:hover { background: #d4af37; color: black; }
        .restart-msg { text-align: center; margin-bottom: 20px; font-size: 1.1rem; color: #d4af37; }
    </style>
</head>
<body>

<div id="container">
    <div id="resume-screen" class="screen">
        <h1>続きから再開しますか？</h1>
        <p class="restart-msg" id="resume-info"></p>
        <div class="btn-group">
            <button onclick="resumeQuiz()">続きから再開する</button>
            <button onclick="startFresh()">最初からやり直す</button>
        </div>
    </div>

    <div id="quiz-area"></div>
</div>

<script>
    const chapters = [
        { title: "第1章：憲法の嘘", concept: "「守ってもらえる」という幻想", questions: ["国が必ず守ってくれると思っている", "自分で守ることを考えたことがない", "考えるのは偉い人の仕事だと思う"] },
        { title: "第2章：民主主義の罠", concept: "「多数＝正解」という罠", questions: ["テレビやSNSをそのまま信じる", "周りと違う意見が怖い", "みんなが言うから決める"] },
        { title: "第3章：税金の嘘", concept: "「みんなのため」という言葉", questions: ["税金の使い道を考えない", "払うしかないと思っている", "文句は悪いことだと思う"] },
        { title: "第4章：労働の嘘", concept: "「我慢すれば報われる」", questions: ["しんどくても我慢する", "辞めたら負けだと思う", "自分の代わりはいないと思う"] },
        { title: "第5章：自己責任の嘘", concept: "「全部お前のせい」", questions: ["失敗は努力不足だと思う", "困ってる人にイラつく", "助けは甘えだと思う"] },
        { title: "第6章：教育の嘘", concept: "「教えられたことが全て」", questions: ["正解は一つだと思う", "質問が怖い", "権威は絶対だと思う"] },
        { title: "第7章：平和の嘘", concept: "「何もしなくても続く」", questions: ["平和は当たり前だと思う", "面倒な話から逃げる", "知らなくても困らないと思う"] },
        { title: "第8章：メディアの嘘", concept: "「中立」という仮面", questions: ["ニュースは全部事実だと思う", "不快な情報は見ない", "疑うのは悪だと思う"] },
        { title: "第9章：便利さの嘘", concept: "「楽になる代わりに」", questions: ["便利なら何でもいい", "考えなくていいのが楽", "個人情報は仕方ない"] },
        { title: "第10章：買収の嘘", concept: "「魂のコントローラー」", questions: ["得なら信念を曲げられる", "波風を立てたくない", "本音を隠している"] }
    ];

    let currentChapter = 0;
    let currentQuestion = 0;

    // 起動時に保存データがあるか確認
    window.onload = function() {
        const savedCh = localStorage.getItem('yamato_chapter');
        const savedQ = localStorage.getItem('yamato_question');
        
        if (savedCh !== null && savedQ !== null) {
            currentChapter = parseInt(savedCh);
            currentQuestion = parseInt(savedQ);
            
            // 第1章の1問目以外なら「再開画面」を出す
            if (currentChapter > 0 || currentQuestion > 0) {
                document.getElementById('resume-info').innerText = `${chapters[currentChapter].title} の途中からや。`;
                showScreen('resume-screen');
            } else {
                render();
            }
        } else {
            render();
        }
    };

    function render() {
        const area = document.getElementById('quiz-area');
        area.innerHTML = `
            <div class="screen active">
                <h2>${chapters[currentChapter].title}</h2>
                <div class="concept-box">${chapters[currentChapter].concept}</div>
                <div class="question-text">
                    問 ${currentQuestion + 1}<br>
                    ${chapters[currentChapter].questions[currentQuestion]}
                </div>
                <div class="btn-group">
                    <button onclick="next()">はい</button>
                    <button onclick="next()">どちらでもない</button>
                    <button onclick="next()">いいえ</button>
                </div>
            </div>
        `;
        // 現在の場所を保存
        localStorage.setItem('yamato_chapter', currentChapter);
        localStorage.setItem('yamato_question', currentQuestion);
    }

    function next() {
        if (currentQuestion < 2) {
            currentQuestion++;
        } else if (currentChapter < 9) {
            currentChapter++;
            currentQuestion = 0;
        } else {
            showResult();
            return;
        }
        render();
        window.scrollTo(0,0);
    }

    function showResult() {
        localStorage.removeItem('yamato_chapter'); // 終わったら消す
        localStorage.removeItem('yamato_question');
        document.getElementById('quiz-area').innerHTML = `
            <div class="screen active">
                <h1>診断完了</h1>
                <p style="font-size:1.2rem; text-align:center;">全十章、完走お疲れさん。<br>これが今のあんたの魂の現在地や。</p>
                <button onclick="startFresh()" style="width:100%">最初に戻る</button>
            </div>
        `;
    }

    function resumeQuiz() {
        render();
    }

    function startFresh() {
        currentChapter = 0;
        currentQuestion = 0;
        localStorage.removeItem('yamato_chapter');
        localStorage.removeItem('yamato_question');
        render();
    }

    function showScreen(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }
</script>
</body>
</html>
