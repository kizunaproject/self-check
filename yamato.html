<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>倭之魂：自らを守る十章</title>
    <style>
        body {
            background-color: #0d0d0d;
            background-image: linear-gradient(rgba(0,0,0,0.0), rgba(0,0,0,0.0)), url('bg.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: #ffffff;
            font-family: sans-serif;
            margin: 0;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }
        #container {
            width: 95%; max-width: 600px; margin: 20px 0; padding: 25px;
            background: rgba(0, 0, 0, 0.85); border-radius: 15px; border: 2px solid #d4af37;
        }
        .screen { display: none; }
        .active { display: block; animation: fadeIn 0.4s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        h2 { color: #d4af37; font-size: 1.2rem; border-bottom: 1px solid #d4af37; padding-bottom: 5px; }
        .concept-box { background: rgba(212, 175, 55, 0.15); padding: 15px; border-radius: 10px; margin-bottom: 20px; font-size: 1.1rem; }
        .question-text { font-size: 1.4rem; font-weight: bold; margin: 30px 0; text-align: center; }
        .msg-text { font-size: 1.2rem; color: #d4af37; text-align: center; margin-bottom: 20px; font-weight: bold; }

        .btn-group { display: flex; flex-direction: column; gap: 15px; }
        button {
            padding: 18px; background: rgba(212, 175, 55, 0.1); border: 2px solid #d4af37;
            color: #d4af37; border-radius: 10px; cursor: pointer; font-weight: bold; font-size: 1.2rem;
        }
        button:hover { background: #d4af37; color: black; }
        .status-btn { text-align: left; background: rgba(255,255,255,0.1); font-size: 1rem; padding: 15px; }
    </style>
</head>
<body>
<div id="container">
    <div id="quiz-area"></div>
</div>

<script>
    const chapters = [
        { title: "第1章：憲法の嘘", concept: "「守ってもらえる」という幻想", msg: "その感覚、忘れなや。", questions: ["国が必ず守ってくれると思っている", "自分で守ることを考えたことがない", "考えるのは偉い人の仕事だと思う"] },
        { title: "第2章：民主主義の罠", concept: "「多数＝正解」という罠", msg: "多数決が正義とは限らんで。", questions: ["テレビやSNSをそのまま信じる", "周りと違う意見が怖い", "みんなが言うから決める"] },
        { title: "第3章：税金の嘘", concept: "「みんなのため」という言葉", msg: "使い道を知らなきゃ、魂まで取られるで。", questions: ["税金の使い道を考えない", "払うしかないと思っている", "文句は悪いことだと思う"] },
        { title: "第4章：労働の嘘", concept: "「我慢すれば報われる」", msg: "電池は使いすぎると壊れる。人も同じや。", questions: ["しんどくても我慢する", "辞めたら負けだと思う", "自分の代わりはいないと思う"] },
        { title: "第5章：自己責任の嘘", concept: "「全部お前のせい」", msg: "仕組みが悪いこともあるんや。", questions: ["失敗は努力不足だと思う", "困ってる人にイラつく", "助けは甘えだと思う"] },
        { title: "第6章：教育の嘘", concept: "「教えられたことが全て」", msg: "答えは一つとは限らんで。", questions: ["正解は一つだと思う", "質問が怖い", "権威は絶対だと思う"] },
        { title: "第7章：平和の嘘", concept: "「何もしなくても続く」", msg: "見ないふりは、壊れるのを早めるだけや。", questions: ["平和は当たり前だと思う", "面倒な話から逃げる", "知らなくても困らないと思う"] },
        { title: "第8章：メディアの嘘", concept: "「中立」という仮面", msg: "選ばれた情報だけ、見せられてるんや。", questions: ["ニュースは全部事実だと思う", "不快な情報は見ない", "疑うのは悪だと思う"] },
        { title: "第9章：便利さの嘘", concept: "「楽になる代わりに」", msg: "楽と自由は、同じではないんや。", questions: ["便利なら何でもいい", "考えなくていいのが楽", "個人情報は仕方ない"] },
        { title: "第10章：買収の嘘", concept: "「魂のコントローラー」", msg: "人生のハンドルは、自分で握るもんや。", questions: ["得なら信念を曲げられる", "波風を立てたくない", "本音を隠している"] }
    ];

    let currentChapter = parseInt(localStorage.getItem('yamato_ch')) || 0;
    let currentQuestion = parseInt(localStorage.getItem('yamato_q')) || 0;
    let isReviewing = false;

    function render() {
        const area = document.getElementById('quiz-area');
        const ch = chapters[currentChapter];

        if (isReviewing) {
            // 章の終わりの「気づき」画面
            area.innerHTML = `
                <div class="screen active">
                    <h2>${ch.title} 完了</h2>
                    <div class="msg-text">『${ch.msg}』</div>
                    <p>今のあんたの心境は？</p>
                    <div class="btn-group">
                        <button class="status-btn" onclick="finishChapter()">□ ✔ 気づいた（選び直したい）</button>
                        <button class="status-btn" onclick="finishChapter()">□ △ まだ揺れてる（怖い）</button>
                        <button class="status-btn" onclick="finishChapter()">□ ✖ 否定したい（波風は嫌や）</button>
                    </div>
                </div>`;
        } else {
            // 設問画面
            area.innerHTML = `
                <div class="screen active">
                    <h2>${ch.title} - 問 ${currentQuestion + 1}</h2>
                    <div class="concept-box">${ch.concept}</div>
                    <div class="question-text">${ch.questions[currentQuestion]}</div>
                    <div class="btn-group">
                        <button onclick="answer()">はい</button>
                        <button onclick="answer()">どちらでもない</button>
                        <button onclick="answer()">いいえ</button>
                    </div>
                </div>`;
        }
        localStorage.setItem('yamato_ch', currentChapter);
        localStorage.setItem('yamato_q', currentQuestion);
    }

    function answer() {
        if (currentQuestion < 2) {
            currentQuestion++;
        } else {
            isReviewing = true;
        }
        render();
        window.scrollTo(0,0);
    }

    function finishChapter() {
        isReviewing = false;
        currentQuestion = 0;
        if (currentChapter < 9) {
            currentChapter++;
            render();
        } else {
            showFinal();
        }
        window.scrollTo(0,0);
    }

    function showFinal() {
        localStorage.clear();
        document.getElementById('quiz-area').innerHTML = `
            <div class="screen active">
                <h1>診断完了</h1>
                <p style="font-size:1.2rem; text-align:center;">全十章、完走お疲れさん。<br>ハンドルを握ってるのはあんた自身や。</p>
                <button onclick="location.reload()" style="width:100%">最初に戻る</button>
            </div>`;
    }

    render();
</script>
</body>
</html>
